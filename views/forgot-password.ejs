<%- include('partials/header', {title: 'Forgot Password - Pet Care'}) %>

<style>
/* ===== FIX HEADER GAP FOR FORGOT PASSWORD PAGE ===== */
/* Remove ALL spacing from body */
body {
    padding-top: 0 !important;
    margin: 0 !important;
}

/* Target the navbar directly */
.navbar-modern {
    position: relative !important;
    top: auto !important;
}

/* Remove ALL padding and margins from main container */
.container-fluid {
    padding-top: 0 !important;
    margin-top: 0 !important;
}

/* Remove spacing from the row and card */
.row.justify-content-center {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

.col-md-6.col-lg-5 {
    margin-top: 0 !important;
    padding-top: 0 !important;
}

.card.card-custom {
    margin-top: 0 !important;
    border-top: none !important;
}

/* Remove any potential spacing from header partial */
header {
    margin-bottom: 0 !important;
}

/* Your existing card styles */
.card-custom {
    border: none;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    overflow: hidden;
}

.card-custom:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.08);
}

/* Primary button styling */
.btn-primary {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border: none;
    transition: all 0.3s ease;
    color: white !important;
    font-weight: 500;
    border-radius: 8px;
    padding: 0.75rem 1.5rem;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(67, 97, 238, 0.4);
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
    color: white !important;
}

/* Secondary button styling for "Back to Login" */
.btn-secondary-custom {
    background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
    border: none;
    transition: all 0.3s ease;
    color: white !important;
    font-weight: 500;
    border-radius: 8px;
    padding: 0.75rem 1.5rem;
    text-decoration: none !important;
    display: inline-block;
    text-align: center;
    width: 100%;
    font-size: 1.1rem;
}

.btn-secondary-custom:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(108, 117, 125, 0.4);
    background: linear-gradient(135deg, #5a6268 0%, #6c757d 100%);
    color: white !important;
    text-decoration: none !important;
}

/* Ensure both buttons have the same size */
.btn-primary, .btn-secondary-custom {
    font-size: 1.1rem;
    font-weight: 500;
    line-height: 1.5;
    height: auto;
    min-height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

/* Fix for dark mode */
[data-theme="dark"] .btn-secondary-custom {
    background: linear-gradient(135deg, #495057 0%, #343a40 100%);
}

[data-theme="dark"] .btn-secondary-custom:hover {
    background: linear-gradient(135deg, #343a40 0%, #495057 100%);
}

.form-control:focus {
    border-color: var(--primary) !important;
    box-shadow: 0 0 0 0.2rem rgba(67, 97, 238, 0.25);
}
/* ===== FIX CONTRAST ISSUES FOR FORGOT PASSWORD PAGE ===== */

/* Fix for form labels in dark mode */
[data-theme="dark"] .form-label,
[data-theme="dark"] .fw-semibold {
    color: #ffffff !important;
    opacity: 1 !important;
    background-color: transparent !important;
}

/* Fix for "Enter your email" label specifically */
[data-theme="dark"] label[for="email"] {
    color: #ffffff !important;
}

/* Fix for headings in dark mode */
[data-theme="dark"] .text-dark {
    color: #ffffff !important;
}

/* Ensure proper contrast for text in light mode */
[data-theme="light"] .text-dark {
    color: #212529 !important;
}

[data-theme="light"] .form-label {
    color: #212529 !important;
}

/* Fix for dark mode card background */
[data-theme="dark"] .card-custom {
    background: var(--light) !important;
    border-color: var(--glass-border) !important;
}

[data-theme="dark"] body {
    background-color: var(--light) !important;
}
</style>

<div class="container">
    <div class="row justify-content-center align-items-center min-vh-80 py-5">
        <div class="col-md-6 col-lg-5">
            <div class="card card-custom shadow-lg border-0">
                <div class="card-body p-5">
                    <h1 class="h3 mb-4 text-center fw-bold text-dark">Forgot Password</h1>
                    
                    <% if (typeof message !== 'undefined' && message) { %>
                        <div class="alert alert-info alert-dismissible fade show" role="alert">
                            <i class="bi bi-info-circle me-2"></i>
                            <%= message %>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    <% } %>
                    
                    <% if (typeof error !== 'undefined' && error) { %>
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <i class="bi bi-exclamation-triangle me-2"></i>
                            <%= error %>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    <% } %>

                    <form action="/auth/forgot-password" method="POST" class="needs-validation" novalidate>
                        <div class="mb-4">
                            <label for="email" class="form-label fw-semibold">Enter your email *</label>
                            <input type="email" class="form-control form-control-lg" id="email" name="email" 
                                   placeholder="your@email.com" required>
                            <div class="invalid-feedback">
                                Please provide a valid email address.
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary w-100 btn-lg py-3 fw-semibold mb-3">
                            <i class="bi bi-envelope-paper me-2"></i>Send Reset Link
                        </button>
                    </form>

                    <!-- Back to Login Button - Similar style but different color -->
                    <div class="mt-4">
                        <a href="/login" class="btn btn-secondary-custom w-100 btn-lg py-3 fw-semibold">
                            <i class="bi bi-arrow-left me-2"></i>Back to Login
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Form validation
    document.addEventListener('DOMContentLoaded', function () {
        const forms = document.querySelectorAll('.needs-validation');
        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
        
        // Function to update contrast for form labels
        function updateContrast() {
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            
            // Update all form labels
            document.querySelectorAll('.form-label').forEach(label => {
                label.style.color = isDark ? '#ffffff' : '#212529';
                label.style.backgroundColor = 'transparent';
                label.style.opacity = '1';
            });
            
            // Update dark text elements
            document.querySelectorAll('.text-dark').forEach(el => {
                el.style.color = isDark ? '#ffffff' : '#212529';
            });
        }
        
        // Apply contrast on load
        updateContrast();
        
        // Watch for theme changes
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.attributeName === 'data-theme') {
                    updateContrast();
                }
            });
        });
        
        observer.observe(document.documentElement, { attributes: true });
    });
</script>

<%- include('partials/footer') %>